import{b as ge,m as we,c as he,e as Le,f as je,g as Ne,h as ze}from"./index-Bz-GYz9Z.js";import{g as ye,u as Ge}from"./providerIcons-BEGbTQUu.js";import{d as ve,g as d,c as F,a as k,I as Ye,x as Ie,o as Te,D as We,j as w,w as e,b as t,h as n,F as ee,v as fe,q as Pe,t as g,i as J,m as h,r as z,B as Ue,n as pe,e as f,l as Xe,J as E,K as be,L as me,p as $,s as Ce,M as De,O as He,P as Ke,H as Ze}from"./index-okdrDDuw.js";import{A as et}from"./AddOutline-BG7ovhQf.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const lt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},nt=k("rect",{x:"128",y:"128",width:"336",height:"336",rx:"57",ry:"57",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),at=k("path",{d:"M383.5 128l.5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),st=[nt,at],ot=ve({name:"CopyOutline",render:function(r,C){return d(),F("svg",lt,st)}}),it={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ut=k("path",{d:"M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),rt=k("path",{d:"M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z",fill:"currentColor"},null,-1),dt=k("path",{d:"M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z",fill:"currentColor"},null,-1),pt=[ut,rt,dt],ft=ve({name:"CreateOutline",render:function(r,C){return d(),F("svg",it,pt)}}),ct={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},_t=Ye('<path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352" fill="currentColor"></path><path d="M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 176v224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M184 176l8 224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M328 176l-8 224"></path>',6),mt=[_t],Re=ve({name:"TrashOutline",render:function(r,C){return d(),F("svg",ct,mt)}}),yt=["innerHTML"],vt={key:0,style:{"margin-top":"12px"}},gt=["innerHTML"],bt=["innerHTML"],wt=["innerHTML"],xt={key:1,style:{"max-height":"400px","overflow-y":"auto"}},kt=ve({__name:"AIServiceSettings",setup(Y){const r=Ie(),C=z([]),M=z(!1),O=z(!1),c=Ue({}),L=Ue({}),P=Ue({}),B=Ue({});async function _(){var m,s;M.value=!0;try{const{data:S}=await ge.list();C.value=S}catch(S){r.error("åŠ è½½æä¾›å•†å¤±è´¥: "+(((s=(m=S.response)==null?void 0:m.data)==null?void 0:s.detail)||S.message))}finally{M.value=!1}}const I=pe(()=>{const m=C.value.filter(S=>S.slug==="copilot"||S.slug==="github"),s=C.value.filter(S=>S.slug!=="copilot"&&S.slug!=="github"&&S.api_key_set);return[...m,...s]}),j=pe(()=>C.value.filter(m=>m.slug!=="copilot"&&m.slug!=="github"&&!m.api_key_set)),R=pe(()=>{var s;const m=(s=D.value)==null?void 0:s.premium_requests;return!m||m.unlimited||!m.entitlement?0:Math.round((m.entitlement-m.remaining)/m.entitlement*1e3)/10});function te(m){return m.slug==="copilot"&&b.value.authenticated?"background: #16213e; border-left: 3px solid #18a058":m.slug==="github"?"background: #16213e; border-left: 3px solid #4098fc":m.enabled&&m.api_key_set?"background: #16213e; border-left: 3px solid #18a058":"background: #16213e; opacity: 0.8"}async function se(m){var S,v;const s=c[m.slug];if(s){P[m.slug]=!0;try{await ge.update(m.slug,{api_key:s,enabled:!0}),c[m.slug]="",r.success(`${m.name} API Key å·²ä¿å­˜å¹¶å¯ç”¨`),await _(),await we.refresh()}catch(Z){r.error("ä¿å­˜å¤±è´¥: "+(((v=(S=Z.response)==null?void 0:S.data)==null?void 0:v.detail)||Z.message))}finally{P[m.slug]=!1}}}async function ue(m){var S,v;const s=L[m.slug];if(s)try{await ge.update(m.slug,{base_url:s}),r.success("Base URL å·²æ›´æ–°"),await _()}catch(Z){r.error("æ›´æ–°å¤±è´¥: "+(((v=(S=Z.response)==null?void 0:S.data)==null?void 0:v.detail)||Z.message))}}async function T(m,s){try{await ge.update(m.slug,{enabled:s}),r.success(`${m.name} ${s?"å·²å¯ç”¨":"å·²ç¦ç”¨"}`),await _(),await we.refresh()}catch{r.error("æ“ä½œå¤±è´¥")}}async function y(m){var s,S;B[m.slug]=!0;try{const{data:v}=await ge.test(m.slug);v.success?r.success(`âœ… ${m.name}: ${v.message}`):r.error(`âŒ ${m.name}: ${v.message}`)}catch(v){r.error("æµ‹è¯•å¤±è´¥: "+(((S=(s=v.response)==null?void 0:s.data)==null?void 0:S.detail)||v.message))}finally{B[m.slug]=!1}}const o=z(!1),U=z(""),A=z({models:[]}),N=z(!1);async function Q(m){var s,S;U.value=m.name,N.value=!0,o.value=!0;try{const{data:v}=await ge.fetchModels(m.slug);A.value=v}catch(v){A.value={models:[],message:"è·å–å¤±è´¥: "+(((S=(s=v.response)==null?void 0:s.data)==null?void 0:S.detail)||v.message)}}finally{N.value=!1}}async function oe(m){var s,S;try{await ge.delete(m.slug),r.success(`å·²åˆ é™¤ ${m.name}`),await _()}catch(v){r.error("åˆ é™¤å¤±è´¥: "+(((S=(s=v.response)==null?void 0:s.data)==null?void 0:S.detail)||v.message))}}const le=z(!1),ne=z(!1),H=Ue({slug:"",name:"",base_url:"",api_key:"",icon:"ğŸ”Œ"});async function re(){var m,s;if(!H.slug||!H.name||!H.base_url)return r.warning("è¯·å¡«å†™æ ‡è¯†ã€åç§°å’Œ Base URL"),!1;ne.value=!0;try{await ge.create({...H}),r.success(`å·²æ·»åŠ  ${H.name}`),H.slug="",H.name="",H.base_url="",H.api_key="",H.icon="ğŸ”Œ",le.value=!1,await _(),await we.refresh()}catch(S){return r.error("æ·»åŠ å¤±è´¥: "+(((s=(m=S.response)==null?void 0:m.data)==null?void 0:s.detail)||S.message)),!1}finally{ne.value=!1}}const b=z({authenticated:!1}),D=z(null),ce=z(!1),xe=z(!1),G=z(!1),q=z({active:!1,user_code:"",verification_uri:"",polling:!1,message:"",progress:0});let de=null,ie=null;async function a(){try{const{data:m}=await he.status();b.value=m,m.authenticated&&l()}catch{}}async function l(){ce.value=!0;try{const{data:m}=await he.usage();D.value=m}catch{}finally{ce.value=!1}}async function i(){var m,s;xe.value=!0;try{const{data:S}=await he.startDeviceFlow();q.value={active:!0,user_code:S.user_code,verification_uri:S.verification_uri,polling:!0,message:"è¯·åœ¨æµè§ˆå™¨ä¸­å®Œæˆæˆæƒ...",progress:0},x();const v=(S.expires_in||900)*1e3,Z=Date.now();ie=setInterval(()=>{q.value.progress=Math.min(100,(Date.now()-Z)/v*100)},1e3)}catch(S){r.error("å¯åŠ¨æˆæƒå¤±è´¥: "+(((s=(m=S.response)==null?void 0:m.data)==null?void 0:s.detail)||S.message))}finally{xe.value=!1}}function x(){de=setInterval(async()=>{try{const{data:m}=await he.pollDeviceFlow();m.status==="success"?(K(),q.value={active:!1},await a(),await we.refresh(),r.success("ğŸ‰ Copilot æˆæƒæˆåŠŸ!")):m.status==="expired"&&(K(),q.value={active:!1},r.warning("æˆæƒç å·²è¿‡æœŸï¼Œè¯·é‡æ–°å¼€å§‹"))}catch{}},6e3)}function K(){de&&(clearInterval(de),de=null),ie&&(clearInterval(ie),ie=null)}function p(){navigator.clipboard.writeText(q.value.user_code),r.success("å·²å¤åˆ¶")}async function V(){G.value=!0;try{const{data:m}=await he.test();m.success?r.success("âœ… "+m.message):r.error("âŒ "+m.message)}catch{r.error("æµ‹è¯•å¤±è´¥")}finally{G.value=!1}}async function $e(){try{await he.logout(),b.value={authenticated:!1},D.value=null,await we.refresh(),r.info("å·²æ³¨é”€ Copilot")}catch{}}return Te(()=>{_(),a()}),We(()=>{K()}),(m,s)=>{const S=f("n-alert"),v=f("n-text"),Z=f("n-tag"),W=f("n-space"),Oe=f("n-switch"),Be=f("n-progress"),ae=f("n-button"),ke=f("n-card"),Me=f("n-input-group-label"),_e=f("n-input"),Ae=f("n-input-group"),Ee=f("n-popconfirm"),qe=f("n-spin"),Ve=f("n-icon"),Se=f("n-form-item"),Je=f("n-form"),Fe=f("n-modal"),Qe=f("n-empty");return d(),w(W,{vertical:"",size:16},{default:e(()=>[t(S,{type:"info",bordered:!1},{default:e(()=>[...s[9]||(s[9]=[n(" é…ç½® AI æ¨¡å‹æœåŠ¡æä¾›å•†ã€‚å†…ç½®çš„ GitHub Models å’Œ Copilot ç”±ç³»ç»Ÿç®¡ç†ï¼Œç¬¬ä¸‰æ–¹æä¾›å•†éœ€è¦è‡ªè¡Œå¡«å†™ API Keyã€‚ å¯ç”¨åï¼Œå…¶æ¨¡å‹ä¼šè‡ªåŠ¨å‡ºç°åœ¨è®¨è®ºå’Œå®æ–½çš„æ¨¡å‹ä¸‹æ‹‰åˆ—è¡¨ä¸­ã€‚ ",-1)])]),_:1}),t(qe,{show:M.value},{default:e(()=>[t(W,{vertical:"",size:12},{default:e(()=>[(d(!0),F(ee,null,fe(I.value,u=>(d(),F(ee,{key:u.slug},[u.slug==="copilot"?(d(),w(ke,{key:0,size:"small",style:Pe(te(u))},{header:e(()=>[t(W,{align:"center",size:8},{default:e(()=>[k("span",{innerHTML:h(ye)(u.slug,u.name,20),style:{display:"inline-flex"}},null,8,yt),t(v,{strong:""},{default:e(()=>[n(g(u.name),1)]),_:2},1024),t(Z,{type:b.value.authenticated?"success":"default",size:"small"},{default:e(()=>[n(g(b.value.authenticated?"å·²æˆæƒ":"æœªæˆæƒ"),1)]),_:1},8,["type"])]),_:2},1024)]),"header-extra":e(()=>[t(Oe,{value:b.value.authenticated,disabled:!0,size:"small"},null,8,["value"])]),default:e(()=>[t(v,{depth:"3",style:{"font-size":"12px"}},{default:e(()=>[n(g(u.description),1)]),_:2},1024),D.value&&D.value.premium_requests&&b.value.authenticated?(d(),F("div",vt,[t(W,{align:"center",justify:"space-between",style:{"margin-bottom":"6px"}},{default:e(()=>[t(v,{strong:"",style:{"font-size":"13px"}},{default:e(()=>[...s[10]||(s[10]=[n("âš¡ é«˜çº§è¯·æ±‚é…é¢",-1)])]),_:1}),t(v,{depth:"3",style:{"font-size":"12px"}},{default:e(()=>[n(" é‡ç½®: "+g(D.value.quota_reset_date||"-"),1)]),_:1})]),_:1}),D.value.premium_requests.unlimited?(d(),w(Z,{key:0,type:"success",size:"small"},{default:e(()=>[...s[11]||(s[11]=[n("æ— é™åˆ¶",-1)])]),_:1})):(d(),w(W,{key:1,vertical:"",size:4},{default:e(()=>[t(W,{align:"center",size:8},{default:e(()=>[t(v,{style:{"font-size":"18px","font-weight":"bold","font-variant-numeric":"tabular-nums"}},{default:e(()=>[n(g(D.value.premium_requests.remaining),1)]),_:1}),t(v,{depth:"3",style:{"font-size":"13px"}},{default:e(()=>[n(" / "+g(D.value.premium_requests.entitlement)+" å‰©ä½™ ",1)]),_:1}),t(Z,{type:R.value>90?"error":R.value>70?"warning":"success",size:"small"},{default:e(()=>[n(" å·²ç”¨ "+g(R.value)+"% ",1)]),_:1},8,["type"])]),_:1}),t(Be,{type:"line",percentage:R.value,color:R.value<70?"#18a058":R.value<90?"#f0a020":"#d03050","rail-color":"rgba(255,255,255,0.08)",height:6,"border-radius":4,"show-indicator":!1},null,8,["percentage","color"])]),_:1}))])):J("",!0),t(W,{style:{"margin-top":"12px"}},{default:e(()=>[b.value.authenticated?(d(),F(ee,{key:1},[t(ae,{onClick:V,loading:G.value,size:"small"},{default:e(()=>[...s[15]||(s[15]=[n("ğŸ§ª æµ‹è¯•",-1)])]),_:1},8,["loading"]),t(ae,{onClick:l,loading:ce.value,size:"small"},{default:e(()=>[...s[16]||(s[16]=[n("ğŸ”„ åˆ·æ–°é…é¢",-1)])]),_:1},8,["loading"]),t(ae,{type:"error",onClick:$e,size:"small",ghost:""},{default:e(()=>[...s[17]||(s[17]=[n("ğŸ”“ æ³¨é”€",-1)])]),_:1})],64)):(d(),F(ee,{key:0},[q.value.active?(d(),w(ke,{key:0,size:"small",style:{background:"#1a2744",border:"1px solid #4098fc",width:"100%"}},{default:e(()=>[t(W,{vertical:"",align:"center",size:8},{default:e(()=>[t(v,null,{default:e(()=>[...s[12]||(s[12]=[n("è¯·è®¿é—®ä»¥ä¸‹ç½‘å€å¹¶è¾“å…¥æˆæƒç :",-1)])]),_:1}),t(ae,{tag:"a",href:q.value.verification_uri,target:"_blank",type:"info",size:"small"},{default:e(()=>[n(g(q.value.verification_uri),1)]),_:1},8,["href"]),t(W,{align:"center"},{default:e(()=>[t(v,{strong:"",style:{"font-size":"22px","letter-spacing":"4px","font-family":"monospace"}},{default:e(()=>[n(g(q.value.user_code),1)]),_:1}),t(ae,{size:"tiny",onClick:p},{default:e(()=>[...s[13]||(s[13]=[n("ğŸ“‹",-1)])]),_:1})]),_:1}),t(Be,{type:"line",percentage:q.value.progress,"show-indicator":!1},null,8,["percentage"])]),_:1})]),_:1})):(d(),w(ae,{key:1,type:"primary",onClick:i,loading:xe.value,size:"small"},{default:e(()=>[...s[14]||(s[14]=[n(" ğŸ” ç»‘å®š Copilot ",-1)])]),_:1},8,["loading"]))],64))]),_:1})]),_:2},1032,["style"])):u.slug==="github"?(d(),w(ke,{key:1,size:"small",style:Pe(te(u))},{header:e(()=>[t(W,{align:"center",size:8},{default:e(()=>[k("span",{innerHTML:h(ye)(u.slug,u.name,20),style:{display:"inline-flex"}},null,8,gt),t(v,{strong:""},{default:e(()=>[n(g(u.name),1)]),_:2},1024),t(Z,{type:"success",size:"small"},{default:e(()=>[...s[18]||(s[18]=[n("ç³»ç»Ÿå†…ç½®",-1)])]),_:1})]),_:2},1024)]),"header-extra":e(()=>[t(Oe,{value:!0,disabled:!0,size:"small"})]),default:e(()=>[t(v,{depth:"3",style:{"font-size":"12px"}},{default:e(()=>[n(g(u.description),1)]),_:2},1024)]),_:2},1032,["style"])):(d(),w(ke,{key:2,size:"small",style:Pe(te(u))},{header:e(()=>[t(W,{align:"center",size:8},{default:e(()=>[k("span",{innerHTML:h(ye)(u.slug,u.name,20),style:{display:"inline-flex"}},null,8,bt),t(v,{strong:""},{default:e(()=>[n(g(u.name),1)]),_:2},1024),u.is_preset?(d(),w(Z,{key:0,size:"small"},{default:e(()=>[...s[19]||(s[19]=[n("é¢„è®¾",-1)])]),_:1})):J("",!0),t(Z,{type:"success",size:"small"},{default:e(()=>[...s[20]||(s[20]=[n("å·²é…ç½®",-1)])]),_:1})]),_:2},1024)]),"header-extra":e(()=>[t(Oe,{value:u.enabled,"onUpdate:value":X=>T(u,X),size:"small"},null,8,["value","onUpdate:value"])]),default:e(()=>[t(v,{depth:"3",style:{"font-size":"12px",display:"block","margin-bottom":"10px"}},{default:e(()=>[n(g(u.description),1)]),_:2},1024),t(W,{vertical:"",size:8},{default:e(()=>[t(Ae,null,{default:e(()=>[t(Me,{style:{width:"80px"}},{default:e(()=>[...s[21]||(s[21]=[n("API Key",-1)])]),_:1}),t(_e,{value:c[u.slug],"onUpdate:value":X=>c[u.slug]=X,placeholder:`å·²è®¾ç½® (${u.api_key_hint})`,type:"password","show-password-on":"click",size:"small",style:{flex:"1"}},null,8,["value","onUpdate:value","placeholder"]),t(ae,{size:"small",type:"primary",disabled:!c[u.slug],onClick:X=>se(u),loading:P[u.slug]},{default:e(()=>[...s[22]||(s[22]=[n("ä¿å­˜",-1)])]),_:1},8,["disabled","onClick","loading"])]),_:2},1024),u.is_builtin?J("",!0):(d(),w(Ae,{key:0},{default:e(()=>[t(Me,{style:{width:"80px"}},{default:e(()=>[...s[23]||(s[23]=[n("Base URL",-1)])]),_:1}),t(_e,{value:L[u.slug],"onUpdate:value":X=>L[u.slug]=X,placeholder:u.base_url,size:"small",style:{flex:"1"}},null,8,["value","onUpdate:value","placeholder"]),t(ae,{size:"small",disabled:!L[u.slug]||L[u.slug]===u.base_url,onClick:X=>ue(u)},{default:e(()=>[...s[24]||(s[24]=[n("æ›´æ–°",-1)])]),_:1},8,["disabled","onClick"])]),_:2},1024))]),_:2},1024),t(W,{style:{"margin-top":"10px"}},{default:e(()=>[t(ae,{size:"small",onClick:X=>y(u),loading:B[u.slug]},{default:e(()=>[...s[25]||(s[25]=[n("ğŸ§ª æµ‹è¯•è¿æ¥",-1)])]),_:1},8,["onClick","loading"]),t(ae,{size:"small",onClick:X=>Q(u)},{default:e(()=>[...s[26]||(s[26]=[n("ğŸ“‹ æŸ¥çœ‹æ¨¡å‹",-1)])]),_:1},8,["onClick"]),!u.is_builtin&&!u.is_preset?(d(),w(Ee,{key:0,onPositiveClick:X=>oe(u)},{trigger:e(()=>[t(ae,{size:"small",type:"error",ghost:""},{default:e(()=>[...s[27]||(s[27]=[n("åˆ é™¤",-1)])]),_:1})]),default:e(()=>[n(" ç¡®è®¤åˆ é™¤æä¾›å•† "+g(u.name)+"ï¼Ÿ ",1)]),_:2},1032,["onPositiveClick"])):J("",!0)]),_:2},1024)]),_:2},1032,["style"]))],64))),128)),j.value.length?(d(),w(ke,{key:0,size:"small",style:{background:"#16213e",opacity:"0.85"}},{default:e(()=>[t(W,{align:"center",size:8,onClick:s[0]||(s[0]=u=>O.value=!O.value),style:{cursor:"pointer","user-select":"none"}},{default:e(()=>[t(v,{strong:"",style:{"font-size":"13px"}},{default:e(()=>[...s[28]||(s[28]=[n("ğŸ“¦ æ›´å¤šé¢„è®¾æä¾›å•†",-1)])]),_:1}),t(Z,{size:"small"},{default:e(()=>[n(g(j.value.length)+" ä¸ªæœªé…ç½®",1)]),_:1}),t(v,{depth:"3",style:{"font-size":"11px"}},{default:e(()=>[n(g(O.value?"â–¼ æ”¶èµ·":"â–¶ å±•å¼€é…ç½®"),1)]),_:1})]),_:1}),O.value?(d(),w(W,{key:0,vertical:"",size:12,style:{"margin-top":"12px"}},{default:e(()=>[(d(!0),F(ee,null,fe(j.value,u=>(d(),w(ke,{key:u.slug,size:"small",style:{background:"#16213e",opacity:"0.9"}},{header:e(()=>[t(W,{align:"center",size:8},{default:e(()=>[k("span",{innerHTML:h(ye)(u.slug,u.name,20),style:{display:"inline-flex"}},null,8,wt),t(v,{strong:""},{default:e(()=>[n(g(u.name),1)]),_:2},1024),u.is_preset?(d(),w(Z,{key:0,size:"small"},{default:e(()=>[...s[29]||(s[29]=[n("é¢„è®¾",-1)])]),_:1})):J("",!0)]),_:2},1024)]),default:e(()=>[t(v,{depth:"3",style:{"font-size":"12px",display:"block","margin-bottom":"10px"}},{default:e(()=>[n(g(u.description),1)]),_:2},1024),t(W,{vertical:"",size:8},{default:e(()=>[t(Ae,null,{default:e(()=>[t(Me,{style:{width:"80px"}},{default:e(()=>[...s[30]||(s[30]=[n("API Key",-1)])]),_:1}),t(_e,{value:c[u.slug],"onUpdate:value":X=>c[u.slug]=X,placeholder:"è¾“å…¥ API Key",type:"password","show-password-on":"click",size:"small",style:{flex:"1"}},null,8,["value","onUpdate:value"]),t(ae,{size:"small",type:"primary",disabled:!c[u.slug],onClick:X=>se(u),loading:P[u.slug]},{default:e(()=>[...s[31]||(s[31]=[n("ä¿å­˜",-1)])]),_:1},8,["disabled","onClick","loading"])]),_:2},1024),u.is_builtin?J("",!0):(d(),w(Ae,{key:0},{default:e(()=>[t(Me,{style:{width:"80px"}},{default:e(()=>[...s[32]||(s[32]=[n("Base URL",-1)])]),_:1}),t(_e,{value:L[u.slug],"onUpdate:value":X=>L[u.slug]=X,placeholder:u.base_url,size:"small",style:{flex:"1"}},null,8,["value","onUpdate:value","placeholder"]),t(ae,{size:"small",disabled:!L[u.slug]||L[u.slug]===u.base_url,onClick:X=>ue(u)},{default:e(()=>[...s[33]||(s[33]=[n("æ›´æ–°",-1)])]),_:1},8,["disabled","onClick"])]),_:2},1024))]),_:2},1024)]),_:2},1024))),128))]),_:1})):J("",!0)]),_:1})):J("",!0)]),_:1})]),_:1},8,["show"]),t(ke,{size:"small",style:{"border-style":"dashed",cursor:"pointer"},onClick:s[1]||(s[1]=u=>le.value=!0)},{default:e(()=>[t(W,{justify:"center",align:"center",size:8},{default:e(()=>[t(Ve,{size:"18"},{default:e(()=>[...s[34]||(s[34]=[k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[k("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})],-1)])]),_:1}),t(v,null,{default:e(()=>[...s[35]||(s[35]=[n("æ·»åŠ è‡ªå®šä¹‰ AI æœåŠ¡æä¾›å•† (OpenAI å…¼å®¹)",-1)])]),_:1})]),_:1})]),_:1}),t(Fe,{show:le.value,"onUpdate:show":s[7]||(s[7]=u=>le.value=u),preset:"dialog",title:"æ·»åŠ è‡ªå®šä¹‰ AI æœåŠ¡æä¾›å•†","positive-text":"æ·»åŠ ","negative-text":"å–æ¶ˆ",onPositiveClick:re,loading:ne.value},{default:e(()=>[t(Je,{model:H,"label-placement":"left","label-width":"90"},{default:e(()=>[t(Se,{label:"æ ‡è¯† (slug)"},{default:e(()=>[t(_e,{value:H.slug,"onUpdate:value":s[2]||(s[2]=u=>H.slug=u),placeholder:"è‹±æ–‡å°å†™, å¦‚ siliconflow"},null,8,["value"])]),_:1}),t(Se,{label:"åç§°"},{default:e(()=>[t(_e,{value:H.name,"onUpdate:value":s[3]||(s[3]=u=>H.name=u),placeholder:"æ˜¾ç¤ºåç§°, å¦‚ SiliconFlow"},null,8,["value"])]),_:1}),t(Se,{label:"Base URL"},{default:e(()=>[t(_e,{value:H.base_url,"onUpdate:value":s[4]||(s[4]=u=>H.base_url=u),placeholder:"https://api.siliconflow.cn/v1"},null,8,["value"])]),_:1}),t(Se,{label:"API Key"},{default:e(()=>[t(_e,{value:H.api_key,"onUpdate:value":s[5]||(s[5]=u=>H.api_key=u),placeholder:"sk-...",type:"password","show-password-on":"click"},null,8,["value"])]),_:1}),t(Se,{label:"å›¾æ ‡"},{default:e(()=>[t(_e,{value:H.icon,"onUpdate:value":s[6]||(s[6]=u=>H.icon=u),placeholder:"ğŸ”Œ",style:{width:"80px"}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","loading"]),t(Fe,{show:o.value,"onUpdate:show":s[8]||(s[8]=u=>o.value=u),preset:"card",title:`${U.value} - å¯ç”¨æ¨¡å‹`,style:{"max-width":"600px"}},{default:e(()=>[t(qe,{show:N.value},{default:e(()=>[A.value.message?(d(),w(S,{key:0,type:"info",style:{"margin-bottom":"8px"}},{default:e(()=>[n(g(A.value.message),1)]),_:1})):J("",!0),A.value.models&&A.value.models.length?(d(),F("div",xt,[(d(!0),F(ee,null,fe(A.value.models,(u,X)=>(d(),F("div",{key:u.name,style:Pe(`display:flex;justify-content:space-between;align-items:center;padding:8px 0;${X<A.value.models.length-1?"border-bottom:1px solid rgba(255,255,255,0.06)":""}`)},[t(v,{style:{"font-size":"13px","min-width":"0",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},{default:e(()=>[n(g(u.friendly_name||u.name),1)]),_:2},1024),t(v,{depth:"3",style:{"font-size":"12px","flex-shrink":"0","margin-left":"16px","font-family":"monospace","white-space":"nowrap"}},{default:e(()=>[n(g(u.name),1)]),_:2},1024)],4))),128))])):(d(),w(Qe,{key:2,description:"æš‚æ— æ¨¡å‹æ•°æ®"}))]),_:1},8,["show"])]),_:1},8,["show","title"])]),_:1})}}}),ht=ve({__name:"AIPreferences",setup(Y){const r=Ge(),C=z("");function M(){C.value.trim()&&(r.addToBlacklist(C.value),C.value="")}return(O,c)=>{const L=f("n-alert"),P=f("n-space"),B=f("n-switch"),_=f("n-text"),I=f("n-card"),j=f("n-input-number"),R=f("n-descriptions-item"),te=f("n-descriptions"),se=f("n-tag"),ue=f("n-input"),T=f("n-button");return d(),w(P,{vertical:"",size:16},{default:e(()=>[t(L,{type:"info",bordered:!1},{default:e(()=>[...c[6]||(c[6]=[n(" é…ç½® AI æ¨¡å‹çš„å…¨å±€ä½¿ç”¨åå¥½ï¼Œå½±å“æ‰€æœ‰è®¨è®ºå’Œå®æ–½é¢æ¿ä¸­çš„æ¨¡å‹é€‰æ‹©å’Œè¡Œä¸ºã€‚ ",-1)])]),_:1}),t(I,{size:"small",style:{background:"#16213e"}},{header:e(()=>[t(P,{align:"center",size:8},{default:e(()=>[...c[7]||(c[7]=[k("span",null,"ğŸ¯ æ¨¡å‹ç­›é€‰",-1)])]),_:1})]),default:e(()=>[t(P,{vertical:"",size:12},{default:e(()=>[t(P,{align:"center"},{default:e(()=>[t(B,{value:h(r).freeModelsOnly,"onUpdate:value":c[0]||(c[0]=y=>h(r).freeModelsOnly=y)},null,8,["value"]),t(_,null,{default:e(()=>[...c[8]||(c[8]=[n("ä»…ä½¿ç”¨å…è´¹æ¨¡å‹",-1)])]),_:1}),t(_,{depth:"3",style:{"font-size":"11px"}},{default:e(()=>[...c[9]||(c[9]=[n("å¼€å¯ååªæ˜¾ç¤º x0 çš„å…è´¹æ¨¡å‹ï¼Œä¸æ¶ˆè€—é«˜çº§è¯·æ±‚é¢åº¦",-1)])]),_:1})]),_:1}),t(P,{align:"center"},{default:e(()=>[t(B,{value:h(r).docModelsOnly,"onUpdate:value":c[1]||(c[1]=y=>h(r).docModelsOnly=y)},null,8,["value"]),t(_,null,{default:e(()=>[...c[10]||(c[10]=[n("åªç”¨å®˜æ–¹æ¨èæ¨¡å‹",-1)])]),_:1}),t(_,{depth:"3",style:{"font-size":"11px"}},{default:e(()=>[...c[11]||(c[11]=[n("ä»…å½±å“ Copilot æ¥æºçš„æ¨¡å‹è¿‡æ»¤ï¼Œå¼€å¯ååªæ˜¾ç¤º GitHub å®˜æ–¹æ–‡æ¡£ä¸­åˆ—å‡ºçš„ Copilot æ¨¡å‹ï¼Œä¸å½±å“å…¶ä»–æ¥æº",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(I,{size:"small",style:{background:"#16213e"}},{header:e(()=>[t(P,{align:"center",size:8},{default:e(()=>[...c[12]||(c[12]=[k("span",null,"ğŸ”§ å·¥å…·è°ƒç”¨ & AI è¡Œä¸º",-1)])]),_:1})]),default:e(()=>[t(P,{vertical:"",size:12},{default:e(()=>[t(_,{depth:"3",style:{"font-size":"11px"}},{default:e(()=>[...c[13]||(c[13]=[n(" å·¥å…·è½®æ¬¡ = AI å¯æŸ¥çœ‹ä»£ç çš„æ¬¡æ•°ã€‚å…è´¹æ¨¡å‹å¤šæ¬¡è°ƒç”¨ä¸å½±å“é¢åº¦ï¼Œä»˜è´¹æ¨¡å‹æ¯æ¬¡éƒ½æ¶ˆè€—é«˜çº§è¯·æ±‚ã€‚ ",-1)])]),_:1}),t(te,{column:2,"label-placement":"left",bordered:"",size:"small"},{default:e(()=>[t(R,{label:"å…è´¹æ¨¡å‹å·¥å…·è½®æ¬¡"},{default:e(()=>[t(j,{value:h(r).freeToolRounds,"onUpdate:value":c[2]||(c[2]=y=>h(r).freeToolRounds=y),min:1,max:100,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1}),t(R,{label:"ä»˜è´¹æ¨¡å‹å·¥å…·è½®æ¬¡"},{default:e(()=>[t(j,{value:h(r).paidToolRounds,"onUpdate:value":c[3]||(c[3]=y=>h(r).paidToolRounds=y),min:1,max:50,size:"small",style:{width:"100px"}},null,8,["value"])]),_:1}),t(R,{label:"æˆªæ–­è‡ªåŠ¨ç»§ç»­æ¬¡æ•°"},{default:e(()=>[t(P,{align:"center",size:4},{default:e(()=>[t(j,{value:h(r).maxAutoContinues,"onUpdate:value":c[4]||(c[4]=y=>h(r).maxAutoContinues=y),min:0,max:10,size:"small",style:{width:"100px"}},null,8,["value"]),t(_,{depth:"3",style:{"font-size":"10px"}},{default:e(()=>[...c[14]||(c[14]=[n("AI è¾“å‡ºå›  token æˆªæ–­æ—¶è‡ªåŠ¨ç»§ç»­çš„æœ€å¤§æ¬¡æ•° (0=å…³é—­)",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(I,{size:"small",style:{background:"#16213e"}},{header:e(()=>[t(P,{align:"center",size:8},{default:e(()=>[...c[15]||(c[15]=[k("span",null,"ğŸš« æ¨¡å‹é»‘åå•",-1)])]),_:1})]),default:e(()=>[t(P,{vertical:"",size:12},{default:e(()=>[t(_,{depth:"3",style:{"font-size":"11px"}},{default:e(()=>[...c[16]||(c[16]=[n(" åŒ¹é…åˆ°å…³é”®è¯çš„æ¨¡å‹ä¸ä¼šå‡ºç°åœ¨é€‰æ‹©åˆ—è¡¨ä¸­ (æ¨¡ç³ŠåŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™) ",-1)])]),_:1}),t(P,{size:4,wrap:!0},{default:e(()=>[(d(!0),F(ee,null,fe(h(r).modelBlacklist,y=>(d(),w(se,{key:y,closable:"",size:"small",type:"error",onClose:o=>h(r).removeFromBlacklist(y)},{default:e(()=>[n(g(y),1)]),_:2},1032,["onClose"]))),128)),h(r).modelBlacklist.length?J("",!0):(d(),w(_,{key:0,depth:"3",style:{"font-size":"12px"}},{default:e(()=>[...c[17]||(c[17]=[n(" æš‚æ— é»‘åå•è§„åˆ™ ",-1)])]),_:1}))]),_:1}),t(P,null,{default:e(()=>[t(ue,{value:C.value,"onUpdate:value":c[5]||(c[5]=y=>C.value=y),placeholder:"è¾“å…¥æ¨¡å‹åå…³é”®è¯...",size:"small",style:{width:"200px"},onKeydown:Xe(M,["enter"])},null,8,["value"]),t(T,{size:"small",onClick:M},{default:e(()=>[...c[18]||(c[18]=[n("æ·»åŠ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),zt={style:{display:"flex",gap:"8px","margin-bottom":"10px","flex-wrap":"wrap"}},Ct={style:{flex:"1","min-width":"280px",padding:"8px 12px",background:"rgba(64, 152, 252, 0.06)",border:"1px solid rgba(64, 152, 252, 0.15)","border-radius":"6px"}},Ut={style:{flex:"1","min-width":"280px",padding:"8px 12px",background:"rgba(24, 160, 88, 0.06)",border:"1px solid rgba(24, 160, 88, 0.15)","border-radius":"6px"}},$t=ve({__name:"ModelSettings",setup(Y){const r=Ie(),C=Ge(),M=z(!1),O=z([]),c=z(!1),L=z(""),P=z(""),B=z(""),_=z(""),I=z(new Set);function j(a){if(!a)return"-";if(a>=1e6){const l=a/1e6;return l===Math.floor(l)?`${l}M`:`${l.toFixed(1)}M`}if(a>=1e3){const l=a/1e3;return l===Math.floor(l)?`${l}K`:`${l.toFixed(1)}K`}return`${a}`}function R(a){return a.provider_slug||(a.api_backend==="copilot"?"copilot":"github")}function te(a){return a==="copilot"?"Copilot":a==="github"?"GitHub Models":a.charAt(0).toUpperCase()+a.slice(1)}const se=pe(()=>{const a=new Map;for(const x of O.value){const K=R(x);a.has(K)||a.set(K,te(K))}const l=[{label:"å…¨éƒ¨æ¥æº",value:""}],i=["copilot","github"];for(const x of i)a.has(x)&&(l.push({label:a.get(x),value:x,slug:x}),a.delete(x));for(const[x,K]of[...a.entries()].sort((p,V)=>p[1].localeCompare(V[1])))l.push({label:K,value:x,slug:x});return l});function ue(a,l){if(!a.slug)return $("span",{style:"display:inline-flex;align-items:center;gap:4px"},[a.label]);const i=ye(a.slug,a.label,14);return $("span",{style:"display:inline-flex;align-items:center;gap:4px"},[$("span",{innerHTML:i,style:"display:inline-flex"}),a.label])}const T={OpenAI:"openai",Anthropic:"anthropic",Google:"google",DeepSeek:"deepseek","Mistral AI":"mistralai",Meta:"meta",Microsoft:"microsoft",xAI:"xai",Cohere:"cohere","AI21 Labs":"ai21",Qwen:"qwen"},y=pe(()=>{const a=new Set;for(const i of O.value)i.publisher&&a.add(i.publisher);const l=[{label:"å…¨éƒ¨å‚å•†",value:""}];for(const i of[...a].sort())l.push({label:i,value:i});return l});function o(a,l){if(!a.value)return $("span",{style:"display:inline-flex;align-items:center;gap:4px"},[a.label]);const i=T[a.label]||a.label.toLowerCase().replace(/\s+/g,""),x=ye(i,a.label,14);return $("span",{style:"display:inline-flex;align-items:center;gap:4px"},[$("span",{innerHTML:x,style:"display:inline-flex"}),a.label])}const U=pe(()=>{const a=new Set;for(const x of O.value)x.premium_multiplier!=null&&a.add(x.premium_multiplier);const l=[{label:"å…¨éƒ¨å®šä»·",value:""}];a.has(0)&&(l.push({label:"ğŸ†“ x0 (å…è´¹)",value:"0"}),a.delete(0));const i=[...a].sort((x,K)=>x-K);for(const x of i)l.push({label:`ğŸ’° x${x}`,value:String(x)});return l}),A=pe(()=>{let a=O.value;if(C.docModelsOnly&&I.value.size>0&&(a=a.filter(l=>R(l)!=="copilot"||I.value.has(String(l.id||l.name).replace(/^copilot:/,"").toLowerCase()))),P.value&&(a=a.filter(l=>R(l)===P.value)),B.value&&(a=a.filter(l=>l.publisher===B.value)),_.value){const l=parseFloat(_.value);a=a.filter(i=>i.premium_multiplier===l)}if(L.value){const l=L.value.toLowerCase();a=a.filter(i=>i.name.toLowerCase().includes(l)||i.id.toLowerCase().includes(l)||(i.publisher||"").toLowerCase().includes(l))}return a});async function N(){c.value=!0;try{const{data:a}=await Le.getMerged();O.value=a}catch{}finally{c.value=!1}}async function Q(a,l,i){var x,K;try{await Le.upsertCapability(a.id,{[l]:i}),await N()}catch(p){r.error("æ›´æ–°å¤±è´¥: "+(((K=(x=p.response)==null?void 0:x.data)==null?void 0:K.detail)||p.message))}}async function oe(a){var i;const l=a.id.replace(/^copilot:/,"").toLowerCase();try{await Le.deleteCapability(l),await N(),r.success(`å·²é‡ç½® ${a.name}`)}catch(x){((i=x.response)==null?void 0:i.status)===404?r.info("è¯¥æ¨¡å‹æ²¡æœ‰è¦†ç›–è®°å½•"):r.error("é‡ç½®å¤±è´¥")}}async function le(){try{await Le.resetAllCapabilities(),await N(),r.success("æ‰€æœ‰èƒ½åŠ›è¦†ç›–å·²æ¸…é™¤")}catch{r.error("é‡ç½®å¤±è´¥")}}const ne=z(!1),H=z(!1),re=z(!1),b=z(!1),D=z([]),ce=z({});async function xe(){var a,l;re.value=!0;try{const{data:i}=await we.refreshTokenLimits(),x=[];i.updated_count>0&&x.push(`Token ä¸Šé™ ${i.updated_count} ä¸ª`),i.cap_updated>0&&x.push(`èƒ½åŠ› ${i.cap_updated} ä¸ª`),x.length>0?r.success(`å·²æ ¡å‡†: ${x.join(", ")}`):r.success("æ¨¡å‹èƒ½åŠ›å·²æ˜¯æœ€æ–°"),await N()}catch(i){r.error("æ ¡å‡†å¤±è´¥: "+(((l=(a=i.response)==null?void 0:a.data)==null?void 0:l.detail)||i.message))}finally{re.value=!1}}async function G(){var a,l;ne.value=!0;try{const{data:i}=await we.refreshPricing();D.value=i.changes||[],ce.value=i.scraped||{};const x=Object.keys(ce.value||{}).map(K=>K.toLowerCase());I.value=new Set(x),C.setDocModels(x),b.value=!0,D.value.length===0?r.success(`å®šä»·å·²æ˜¯æœ€æ–° (å…± ${i.scraped_count} ä¸ªæ¨¡å‹)`):r.info(`æ£€æµ‹åˆ° ${D.value.length} é¡¹å®šä»·å˜åŒ–`)}catch(i){r.error("åˆ·æ–°å®šä»·å¤±è´¥: "+(((l=(a=i.response)==null?void 0:a.data)==null?void 0:l.detail)||i.message))}finally{ne.value=!1}}async function q(){var a,l;H.value=!0;try{await we.applyPricing(ce.value),b.value=!1,r.success("å®šä»·è¡¨å·²æ›´æ–°ï¼Œæ­£åœ¨åˆ·æ–°æ¨¡å‹æ•°æ®..."),await N()}catch(i){r.error("åº”ç”¨å®šä»·å¤±è´¥: "+(((l=(a=i.response)==null?void 0:a.data)==null?void 0:l.detail)||i.message))}finally{H.value=!1}}const de=[{title:"æ¨¡å‹",key:"model",width:180,ellipsis:{tooltip:!0},render(a){return $(E,{style:"font-size:12px;font-family:monospace"},()=>a.model)}},{title:"ç±»å‹",key:"type",width:70,render(a){const i={changed:{type:"warning",label:"å˜æ›´"},added:{type:"success",label:"æ–°å¢"},removed:{type:"error",label:"ç§»é™¤"}}[a.type]||{type:"default",label:a.type};return $(Ce,{size:"tiny",type:i.type,bordered:!1},()=>i.label)}},{title:"ä»˜è´¹(æ—§)",key:"old_paid",width:75,render(a){if(a.old_paid==null)return $(E,{depth:3},()=>"-");const l=a.old_paid===0?"#18a058":"#f0a020";return $(E,{style:`color:${l};font-weight:bold`},()=>`x${a.old_paid}`)}},{title:"â†’",key:"arrow1",width:25,render(){return $(E,{depth:3},()=>"â†’")}},{title:"ä»˜è´¹(æ–°)",key:"new_paid",width:75,render(a){if(a.new_paid==null)return $(E,{depth:3},()=>"-");const l=a.new_paid===0?"#18a058":"#f0a020";return $(E,{style:`color:${l};font-weight:bold`},()=>`x${a.new_paid}`)}},{title:"å…è´¹(æ—§)",key:"old_free",width:75,render(a){return a.old_free==null?$(Ce,{size:"tiny",type:"error",bordered:!1},()=>"éœ€è®¢é˜…"):$(Ce,{size:"tiny",type:"success",bordered:!1},()=>`x${a.old_free}`)}},{title:"â†’",key:"arrow2",width:25,render(){return $(E,{depth:3},()=>"â†’")}},{title:"å…è´¹(æ–°)",key:"new_free",width:75,render(a){return a.new_free==null?$(Ce,{size:"tiny",type:"error",bordered:!1},()=>"éœ€è®¢é˜…"):$(Ce,{size:"tiny",type:"success",bordered:!1},()=>`x${a.new_free}`)}},{title:"è¯´æ˜",key:"note",ellipsis:{tooltip:!0},render(a){return $(E,{depth:3,style:"font-size:11px"},()=>a.note)}}],ie=pe(()=>{const a=[{title:"æ¨¡å‹",key:"name",width:180,fixed:"left",ellipsis:{tooltip:!0},render(l){const i=R(l),x=ye(i,"",12);return $("span",{style:"display:inline-flex;align-items:center;gap:3px;font-size:12px"},[$(E,null,()=>l.name),$("span",{innerHTML:x,style:"display:inline-flex"})])}},{title:"æ¥æº",key:"provider_slug",width:100,render(l){const i=R(l),x=te(i),K=ye(i,"",12);return $("span",{style:"display:inline-flex;align-items:center;gap:3px;font-size:11px"},[$("span",{innerHTML:K,style:"display:inline-flex"}),$(E,{depth:3},()=>x)])}},{title:"å‚å•†",key:"publisher",width:90,render(l){if(!l.publisher)return $(E,{depth:3,style:"font-size:11px"},()=>"-");const i=T[l.publisher]||l.publisher.toLowerCase().replace(/\s+/g,""),x=ye(i,l.publisher,12);return $("span",{style:"display:inline-flex;align-items:center;gap:3px;font-size:11px"},[$("span",{innerHTML:x,style:"display:inline-flex"}),$(E,{depth:3},()=>l.publisher)])}}];return M.value?a.push({title:"è¾“å…¥çª—å£",key:"eff_max_input",width:120,sorter:(l,i)=>(l.eff_max_input||0)-(i.eff_max_input||0),render(l){return $(De,{value:l.eff_max_input,size:"tiny",min:0,step:1e3,style:"width:100px","onUpdate:value":i=>{i!=null&&Q(l,"max_input_tokens",i)}})}}):a.push({title:"è¾“å…¥çª—å£",key:"eff_max_input",width:80,sorter:(l,i)=>(l.eff_max_input||0)-(i.eff_max_input||0),render(l){return $(E,{style:"font-size:12px;font-variant-numeric:tabular-nums"},()=>j(l.eff_max_input))}}),M.value?a.push({title:"è¾“å‡º",key:"eff_max_output",width:120,sorter:(l,i)=>(l.eff_max_output||0)-(i.eff_max_output||0),render(l){return $(De,{value:l.eff_max_output,size:"tiny",min:0,step:100,style:"width:100px","onUpdate:value":i=>{i!=null&&Q(l,"max_output_tokens",i)}})}}):a.push({title:"è¾“å‡º",key:"eff_max_output",width:70,sorter:(l,i)=>(l.eff_max_output||0)-(i.eff_max_output||0),render(l){return $(E,{style:"font-size:12px;font-variant-numeric:tabular-nums"},()=>j(l.eff_max_output))}}),a.push({title:"å®šä»·",key:"premium_multiplier",width:80,sorter:(l,i)=>(l.premium_multiplier??0)-(i.premium_multiplier??0),render(l){const i=l.premium_multiplier===0?"#18a058":"#f0a020",x=l.premium_multiplier===0?"x0":`x${l.premium_multiplier}`;return $(Ce,{size:"tiny",bordered:!1,style:`color:${i}`},()=>x)}}),a.push({title:"ğŸ‘ï¸ è§†è§‰",key:"eff_supports_vision",width:65,render(l){return M.value?$(He,{size:"small",value:l.eff_supports_vision,"onUpdate:value":i=>Q(l,"supports_vision",i)}):$(E,{style:"font-size:14px"},()=>l.eff_supports_vision?"âœ…":"â€”")}}),a.push({title:"ğŸ”§ å·¥å…·",key:"eff_supports_tools",width:65,render(l){return M.value?$(He,{size:"small",value:l.eff_supports_tools,"onUpdate:value":i=>Q(l,"supports_tools",i)}):$(E,{style:"font-size:14px"},()=>l.eff_supports_tools?"âœ…":"â€”")}}),a.push({title:"ğŸ§  æ¨ç†",key:"eff_is_reasoning",width:65,render(l){return M.value?$(He,{size:"small",value:l.eff_is_reasoning,"onUpdate:value":i=>Q(l,"is_reasoning",i)}):$(E,{style:"font-size:14px"},()=>l.eff_is_reasoning?"âœ…":"â€”")}}),M.value&&a.push({title:"â†©ï¸",key:"actions",width:50,renderTitle(){return $(Ke,{trigger:"hover"},{trigger:()=>$("span",{style:"cursor: help"},"â†©ï¸"),default:()=>"é‡ç½®ä¸ºè‡ªåŠ¨æ£€æµ‹å€¼ (ä»…å¯¹æœ‰æ‰‹åŠ¨è¦†ç›–çš„è¡Œå¯ç”¨)"})},render(l){return l.has_override?$(Ke,{trigger:"hover"},{trigger:()=>$(me,{size:"tiny",quaternary:!0,onClick:()=>oe(l)},()=>"â†©ï¸"),default:()=>`é‡ç½® ${l.name} çš„è¦†ç›–`}):null}}),a});return Te(()=>{I.value=new Set((C.docModelIds||[]).map(a=>a.toLowerCase())),N()}),(a,l)=>{const i=f("n-popconfirm"),x=f("n-input"),K=f("n-select"),p=f("n-data-table"),V=f("n-empty"),$e=f("n-spin"),m=f("n-card"),s=f("n-alert"),S=f("n-modal");return d(),w(h(be),{vertical:"",size:16},{default:e(()=>[t(m,{size:"small",style:{background:"#16213e"}},{header:e(()=>[t(h(be),{align:"center",size:8},{default:e(()=>[...l[7]||(l[7]=[k("span",null,"ğŸ“Š æ¨¡å‹èƒ½åŠ›ç®¡ç†",-1)])]),_:1})]),"header-extra":e(()=>[M.value?(d(),w(i,{key:0,onPositiveClick:le},{trigger:e(()=>[t(h(me),{size:"tiny",type:"warning",ghost:""},{default:e(()=>[...l[8]||(l[8]=[n("ğŸ”„ æ¸…é™¤æ‰€æœ‰è¦†ç›–",-1)])]),_:1})]),default:e(()=>[l[9]||(l[9]=n(" ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ‰‹åŠ¨è¦†ç›–çš„èƒ½åŠ›è®¾ç½®å—ï¼Ÿå°†æ¢å¤ä¸ºè‡ªåŠ¨æ£€æµ‹å€¼ã€‚ ",-1))]),_:1})):J("",!0)]),default:e(()=>[t(h(E),{depth:"3",style:{"font-size":"11px",display:"block","margin-bottom":"8px"}},{default:e(()=>[l[10]||(l[10]=n(" æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£å’Œèƒ½åŠ›æ•°æ®ã€‚ ",-1)),M.value?(d(),F(ee,{key:1},[n("ç‚¹å‡»æ•°å€¼å¯ç¼–è¾‘, ç‚¹å‡»èƒ½åŠ›å¼€å…³å¯åˆ‡æ¢ã€‚ä¿®æ”¹ä¼šå³æ—¶æŒä¹…åŒ–åˆ°æ•°æ®åº“ã€‚")],64)):(d(),F(ee,{key:0},[n("ç‚¹å‡»ç­›é€‰æ ã€Œâœï¸ ç¼–è¾‘ã€è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚")],64))]),_:1}),k("div",zt,[k("div",Ct,[t(h(be),{align:"center",justify:"space-between",wrap:!1},{default:e(()=>[t(h(be),{vertical:"",size:2},{default:e(()=>[t(h(E),{style:{"font-size":"12px","font-weight":"500"}},{default:e(()=>[...l[11]||(l[11]=[n("ğŸ’° Copilot å®šä»·",-1)])]),_:1}),t(h(E),{depth:"3",style:{"font-size":"10px"}},{default:e(()=>[l[13]||(l[13]=n("ä» ",-1)),t(h(me),{text:"",tag:"a",href:"https://docs.github.com/en/copilot/concepts/billing/copilot-requests#model-multipliers",target:"_blank",size:"tiny",type:"info",style:{"font-size":"10px"}},{default:e(()=>[...l[12]||(l[12]=[n(" å®˜æ–¹æ–‡æ¡£ ",-1)])]),_:1}),l[14]||(l[14]=n(" åŒæ­¥å€ç‡ï¼Œä»…å½±å“ Copilot æ¥æºæ¨¡å‹ ",-1))]),_:1})]),_:1}),t(h(me),{size:"tiny",type:"primary",ghost:"",onClick:G,loading:ne.value},{default:e(()=>[...l[15]||(l[15]=[n(" ğŸ”„ åˆ·æ–°å®šä»· ",-1)])]),_:1},8,["loading"])]),_:1})]),k("div",Ut,[t(h(be),{align:"center",justify:"space-between",wrap:!1},{default:e(()=>[t(h(be),{vertical:"",size:2},{default:e(()=>[t(h(E),{style:{"font-size":"12px","font-weight":"500"}},{default:e(()=>[...l[16]||(l[16]=[n("ğŸ§  æ¨¡å‹èƒ½åŠ›æ ¡å‡†",-1)])]),_:1}),t(h(E),{depth:"3",style:{"font-size":"10px"}},{default:e(()=>[...l[17]||(l[17]=[n("è”ç½‘æ ¡å‡† Token ä¸Šé™ + å†…ç½®çŸ¥è¯†åº“æ ¡å‡†è§†è§‰/å·¥å…·/æ¨ç†èƒ½åŠ›",-1)])]),_:1})]),_:1}),t(h(me),{size:"tiny",type:"info",ghost:"",onClick:xe,loading:re.value},{default:e(()=>[...l[18]||(l[18]=[n(" ğŸ§  æ ¡å‡† ",-1)])]),_:1},8,["loading"])]),_:1})])]),t(h(be),{align:"center",style:{"margin-bottom":"8px"},size:8,wrap:!0},{default:e(()=>[t(x,{value:L.value,"onUpdate:value":l[0]||(l[0]=v=>L.value=v),placeholder:"æœç´¢æ¨¡å‹å...",size:"small",style:{width:"160px"},clearable:""},null,8,["value"]),t(K,{value:P.value,"onUpdate:value":l[1]||(l[1]=v=>P.value=v),options:se.value,"render-label":ue,size:"small",style:{width:"160px"},placeholder:"æ¥æº"},null,8,["value","options"]),t(K,{value:B.value,"onUpdate:value":l[2]||(l[2]=v=>B.value=v),options:y.value,"render-label":o,size:"small",style:{width:"140px"},placeholder:"å‚å•†"},null,8,["value","options"]),t(K,{value:_.value,"onUpdate:value":l[3]||(l[3]=v=>_.value=v),options:U.value,size:"small",style:{width:"130px"},placeholder:"å®šä»·"},null,8,["value","options"]),t(h(me),{size:"small",onClick:N,loading:c.value},{default:e(()=>[...l[19]||(l[19]=[n(" ğŸ”„ åˆ·æ–° ",-1)])]),_:1},8,["loading"]),t(h(me),{size:"small",type:M.value?"primary":"default",onClick:l[4]||(l[4]=v=>M.value=!M.value)},{default:e(()=>[n(g(M.value?"âœ… å®Œæˆ":"âœï¸ ç¼–è¾‘"),1)]),_:1},8,["type"])]),_:1}),t($e,{show:c.value},{default:e(()=>[A.value.length?(d(),w(p,{key:0,columns:ie.value,data:A.value,size:"small","max-height":500,"scroll-x":M.value?1050:950},null,8,["columns","data","scroll-x"])):(d(),w(V,{key:1,description:"åŠ è½½ä¸­..."}))]),_:1},8,["show"])]),_:1}),t(S,{show:b.value,"onUpdate:show":l[6]||(l[6]=v=>b.value=v),preset:"card",title:"ğŸ“Š å®šä»·å˜åŒ–ç¡®è®¤",style:{width:"850px"}},{default:e(()=>[D.value.length===0?(d(),w(s,{key:0,type:"success",bordered:!1},{default:e(()=>[...l[20]||(l[20]=[n(" âœ… å®šä»·å·²æ˜¯æœ€æ–°ï¼Œä¸ GitHub å®˜æ–¹æ–‡æ¡£ä¸€è‡´ï¼Œæ— éœ€æ›´æ–°ã€‚ ",-1)])]),_:1})):(d(),F(ee,{key:1},[t(h(E),{depth:"3",style:{"font-size":"12px",display:"block","margin-bottom":"12px"}},{default:e(()=>[...l[21]||(l[21]=[n(" ä» GitHub å®˜æ–¹æ–‡æ¡£æ£€æµ‹åˆ°ä»¥ä¸‹å®šä»·å˜åŒ–ï¼Œç¡®è®¤åå°†æ›´æ–°è¿è¡Œæ—¶å®šä»·è¡¨ (é‡å¯åæ¢å¤ä¸ºä»£ç é»˜è®¤å€¼)ï¼š ",-1)])]),_:1}),t(p,{columns:de,data:D.value,size:"small","max-height":400},null,8,["data"]),t(h(be),{justify:"end",style:{"margin-top":"12px"}},{default:e(()=>[t(h(me),{size:"small",onClick:l[5]||(l[5]=v=>b.value=!1)},{default:e(()=>[...l[22]||(l[22]=[n("å–æ¶ˆ",-1)])]),_:1}),t(h(me),{size:"small",type:"primary",onClick:q,loading:H.value},{default:e(()=>[n(" ç¡®è®¤åº”ç”¨ ("+g(D.value.length)+" é¡¹å˜æ›´) ",1)]),_:1},8,["loading"])]),_:1})],64))]),_:1},8,["show"])]),_:1})}}}),St={style:{"font-size":"12px"}},Mt={style:{"font-size":"12px",color:"#aaa"}},At={key:0,style:{"margin-top":"2px"}},Lt=ve({__name:"SystemSettings",setup(Y){const r=Ie(),C=z({}),M=z(null),O=z(!1),c=z(!1),L=z([]),P=z(!1),B=z(null);function _(T){return{ok:"success",warning:"warning",error:"error",skipped:"default"}[T]||"default"}function I(T){return{ok:"æ­£å¸¸",warning:"è­¦å‘Š",error:"å¼‚å¸¸",skipped:"è·³è¿‡"}[T]||T}async function j(){try{const{data:T}=await je.listEndpoints();L.value=T.map(y=>({...y,_result:null,_loading:!1}))}catch{}}async function R(){var T,y;P.value=!0,L.value.forEach(o=>{o._loading=!0,o._result=null});try{const{data:o}=await je.testAll();B.value=o;for(const U of o.results){const A=L.value.find(N=>N.id===U.id);A&&(A._result=U,A._loading=!1)}}catch(o){r.error("æ¢æµ‹å¤±è´¥: "+(((y=(T=o.response)==null?void 0:T.data)==null?void 0:y.detail)||o.message))}finally{P.value=!1,L.value.forEach(o=>{o._loading=!1})}}async function te(T){var y,o;T._loading=!0,T._result=null;try{const{data:U}=await je.testOne(T.id);T._result=U}catch(U){T._result={status:"error",message:((o=(y=U.response)==null?void 0:y.data)==null?void 0:o.detail)||U.message,latency_ms:0}}finally{T._loading=!1}}async function se(){O.value=!0;try{const{data:T}=await Ne.status();C.value=T.github||{}}catch{C.value={connected:!1,error:"æ— æ³•è¿æ¥è®¾è®¡é™¢æœåŠ¡"}}finally{O.value=!1}}async function ue(){c.value=!0;try{const{data:T}=await Ne.status();M.value=T,C.value=T.github||{}}catch{}finally{c.value=!1}}return Te(()=>{ue(),j()}),(T,y)=>{const o=f("n-tag"),U=f("n-descriptions-item"),A=f("n-text"),N=f("n-descriptions"),Q=f("n-spin"),oe=f("n-button"),le=f("n-card"),ne=f("n-space"),H=f("n-table");return d(),w(ne,{vertical:"",size:16},{default:e(()=>{var re;return[t(le,{title:"ğŸ”— GitHub è¿æ¥",size:"small",style:{background:"#16213e"}},{default:e(()=>[t(Q,{show:O.value},{default:e(()=>[t(N,{column:1,"label-placement":"left",bordered:""},{default:e(()=>[t(U,{label:"çŠ¶æ€"},{default:e(()=>[t(o,{type:C.value.connected?"success":"error",size:"small"},{default:e(()=>[n(g(C.value.connected?"å·²è¿æ¥":"æœªè¿æ¥"),1)]),_:1},8,["type"])]),_:1}),C.value.repo?(d(),w(U,{key:0,label:"ä»“åº“"},{default:e(()=>[n(g(C.value.repo),1)]),_:1})):J("",!0),C.value.default_branch?(d(),w(U,{key:1,label:"é»˜è®¤åˆ†æ”¯"},{default:e(()=>[n(g(C.value.default_branch),1)]),_:1})):J("",!0),C.value.error?(d(),w(U,{key:2,label:"é”™è¯¯"},{default:e(()=>[t(A,{type:"error"},{default:e(()=>[n(g(C.value.error),1)]),_:1})]),_:1})):J("",!0)]),_:1})]),_:1},8,["show"]),t(oe,{style:{"margin-top":"8px"},onClick:se,loading:O.value,size:"small"},{default:e(()=>[...y[0]||(y[0]=[n(" ğŸ”„ é‡æ–°æ£€æµ‹ ",-1)])]),_:1},8,["loading"])]),_:1}),t(le,{title:"ğŸ–¥ï¸ ç³»ç»ŸçŠ¶æ€",size:"small",style:{background:"#16213e"}},{default:e(()=>[t(Q,{show:c.value},{default:e(()=>[M.value?(d(),w(N,{key:0,column:1,"label-placement":"left",bordered:""},{default:e(()=>[t(U,{label:"Git åˆ†æ”¯"},{default:e(()=>{var b;return[n(g(((b=M.value.git)==null?void 0:b.branch)||"-"),1)]}),_:1}),t(U,{label:"æœ€è¿‘æäº¤"},{default:e(()=>[t(ne,{vertical:"",size:2},{default:e(()=>{var b;return[(d(!0),F(ee,null,fe(((b=M.value.git)==null?void 0:b.recent_commits)||[],D=>(d(),w(A,{key:D,code:"",style:{"font-size":"12px"}},{default:e(()=>[n(g(D),1)]),_:2},1024))),128))]}),_:1})]),_:1})]),_:1})):J("",!0)]),_:1},8,["show"]),t(oe,{style:{"margin-top":"8px"},onClick:ue,loading:c.value,size:"small"},{default:e(()=>[...y[1]||(y[1]=[n(" ğŸ”„ åˆ·æ–° ",-1)])]),_:1},8,["loading"])]),_:1}),(re=M.value)!=null&&re.containers?(d(),w(le,{key:0,title:"ğŸ³ Docker å®¹å™¨",size:"small",style:{background:"#16213e"}},{default:e(()=>[t(H,{bordered:!1,size:"small"},{default:e(()=>[y[2]||(y[2]=k("thead",null,[k("tr",null,[k("th",null,"å®¹å™¨å"),k("th",null,"çŠ¶æ€"),k("th",null,"ç«¯å£")])],-1)),k("tbody",null,[(d(!0),F(ee,null,fe(M.value.containers,b=>{var D;return d(),F("tr",{key:b.name},[k("td",null,g(b.name),1),k("td",null,[t(o,{type:(D=b.status)!=null&&D.includes("Up")?"success":"error",size:"small"},{default:e(()=>[n(g(b.status),1)]),_:2},1032,["type"])]),k("td",St,g(b.ports||"-"),1)])}),128))])]),_:1})]),_:1})):J("",!0),t(le,{title:"ğŸ”Œ å¤–éƒ¨ API ç«¯ç‚¹æ£€æµ‹",size:"small",style:{background:"#16213e"}},{"header-extra":e(()=>[t(ne,{size:8},{default:e(()=>[B.value?(d(),w(A,{key:0,depth:"3",style:{"font-size":"11px"}},{default:e(()=>[n(g(B.value.ok)+"âœ… "+g(B.value.warning)+"âš ï¸ "+g(B.value.error)+"âŒ "+g(B.value.skipped)+"â­ Â· "+g(B.value.total_ms)+"ms ",1)]),_:1})):J("",!0),t(oe,{type:"primary",size:"small",onClick:R,loading:P.value},{default:e(()=>[...y[3]||(y[3]=[n(" ğŸš€ ä¸€é”®å…¨æµ‹ ",-1)])]),_:1},8,["loading"])]),_:1})]),default:e(()=>[t(H,{bordered:!1,size:"small",style:{"margin-top":"4px"}},{default:e(()=>[y[6]||(y[6]=k("thead",null,[k("tr",null,[k("th",{style:{width:"160px"}},"åˆ†ç»„"),k("th",null,"ç«¯ç‚¹"),k("th",{style:{width:"70px"}},"è®¤è¯"),k("th",{style:{width:"90px"}},"çŠ¶æ€"),k("th",{style:{width:"70px"}},"å»¶è¿Ÿ"),k("th",{style:{width:"56px"}},"æ“ä½œ")])],-1)),k("tbody",null,[(d(!0),F(ee,null,fe(L.value,b=>(d(),F("tr",{key:b.id},[k("td",Mt,g(b.group),1),k("td",null,[k("div",null,[t(A,{style:{"font-size":"12px","font-family":"monospace"}},{default:e(()=>[n(g(b.name),1)]),_:2},1024)]),t(A,{depth:"3",style:{"font-size":"11px"}},{default:e(()=>[n(g(b.description),1)]),_:2},1024),b._result&&b._result.status!=="ok"?(d(),F("div",At,[t(A,{type:b._result.status==="error"?"error":"warning",style:{"font-size":"11px"}},{default:e(()=>[n(g(b._result.message),1)]),_:2},1032,["type"])])):J("",!0)]),k("td",null,[t(o,{size:"small",type:b.auth_type==="none"?"default":"info",bordered:!1,style:{"font-size":"10px"}},{default:e(()=>[n(g({none:"æ— ",github_pat:"PAT",copilot_oauth:"OAuth",copilot_session:"Session"}[b.auth_type]||b.auth_type),1)]),_:2},1032,["type"])]),k("td",null,[b._result?(d(),w(o,{key:0,size:"small",bordered:!1,type:_(b._result.status)},{default:e(()=>[n(g(I(b._result.status)),1)]),_:2},1032,["type"])):b._loading?(d(),w(Q,{key:1,size:14})):(d(),w(A,{key:2,depth:"3",style:{"font-size":"11px"}},{default:e(()=>[...y[4]||(y[4]=[n("â€”",-1)])]),_:1}))]),k("td",null,[b._result?(d(),w(A,{key:0,style:{"font-size":"12px","font-variant-numeric":"tabular-nums"}},{default:e(()=>[n(g(b._result.latency_ms?b._result.latency_ms+"ms":"â€”"),1)]),_:2},1024)):J("",!0)]),k("td",null,[t(oe,{size:"tiny",quaternary:"",onClick:D=>te(b),loading:b._loading},{default:e(()=>[...y[5]||(y[5]=[n(" â–¶ ",-1)])]),_:1},8,["onClick","loading"])])]))),128))])]),_:1})]),_:1})]}),_:1})}}}),Pt=Ze("skill",()=>{const Y=z([]),r=z(!1),C=pe(()=>Y.value.filter(I=>I.is_enabled));async function M(I=!1){r.value=!0;try{const{data:j}=await ze.list({enabled_only:I});Y.value=j}finally{r.value=!1}}async function O(I){const{data:j}=await ze.get(I);return j}async function c(I){const{data:j}=await ze.create(I);return Y.value.push(j),j}async function L(I,j){const{data:R}=await ze.update(I,j),te=Y.value.findIndex(se=>se.id===I);return te>=0&&(Y.value[te]=R),R}async function P(I){await ze.delete(I),Y.value=Y.value.filter(j=>j.id!==I)}async function B(I){const{data:j}=await ze.duplicate(I);return Y.value.push(j),j}function _(I){if(I)return Y.value.find(j=>j.id===I)}return{skills:Y,loading:r,enabledSkills:C,fetchSkills:M,getSkill:O,createSkill:c,updateSkill:L,deleteSkill:P,duplicateSkill:B,getSkillById:_}}),It={style:{"font-size":"24px"}},Tt={class:"prompt-preview"},Ot=ve({__name:"SkillSettings",setup(Y){const r=Ie(),C=Pt(),M=z(!1),O=z("basic"),c=z(null),L=z(!1),P=[{label:"draft",value:"draft"},{label:"discussing",value:"discussing"},{label:"planned",value:"planned"},{label:"implementing",value:"implementing"},{label:"reviewing",value:"reviewing"},{label:"deploying",value:"deploying"},{label:"deployed",value:"deployed"},{label:"rolled_back",value:"rolled_back"},{label:"closed",value:"closed"}],B=()=>({name:"",icon:"ğŸ¯",description:"",role_prompt:"",strategy_prompt:"",tool_strategy_prompt:"",finalization_prompt:"",output_generation_prompt:"",stages:[{key:"draft",label:"è‰ç¨¿",status:"draft"},{key:"discussing",label:"è®¨è®º",status:"discussing"},{key:"planned",label:"å®šç¨¿",status:"planned"},{key:"implementing",label:"å®æ–½",status:"implementing"},{key:"reviewing",label:"å®¡æ ¸",status:"reviewing"},{key:"deploying",label:"éƒ¨ç½²",status:"deploying"},{key:"deployed",label:"å®Œæˆ",status:"deployed"}],ui_labels:{project_noun:"",create_title:"",create_placeholder:"",description_placeholder:"",output_noun:"",output_tab_label:"",finalize_action:""}}),_=Ue(B());function I(){c.value=null,Object.assign(_,B()),O.value="basic",M.value=!0}function j(y){c.value=y,Object.assign(_,{name:y.name,icon:y.icon,description:y.description,role_prompt:y.role_prompt,strategy_prompt:y.strategy_prompt,tool_strategy_prompt:y.tool_strategy_prompt,finalization_prompt:y.finalization_prompt,output_generation_prompt:y.output_generation_prompt,stages:JSON.parse(JSON.stringify(y.stages||[])),ui_labels:{...B().ui_labels,...y.ui_labels||{}}}),O.value="basic",M.value=!0}async function R(){var y,o;if(!_.name.trim()){r.warning("è¯·è¾“å…¥æŠ€èƒ½åç§°");return}L.value=!0;try{const U={..._};c.value?(await C.updateSkill(c.value.id,U),r.success("æŠ€èƒ½å·²æ›´æ–°")):(await C.createSkill(U),r.success("æŠ€èƒ½å·²åˆ›å»º")),M.value=!1}catch(U){r.error(((o=(y=U.response)==null?void 0:y.data)==null?void 0:o.detail)||"æ“ä½œå¤±è´¥")}finally{L.value=!1}}async function te(y,o){var U,A;try{await C.updateSkill(y.id,{is_enabled:o}),r.success(o?"å·²å¯ç”¨":"å·²ç¦ç”¨")}catch(N){r.error(((A=(U=N.response)==null?void 0:U.data)==null?void 0:A.detail)||"æ“ä½œå¤±è´¥")}}async function se(y){var o,U;try{await C.duplicateSkill(y.id),r.success("æŠ€èƒ½å·²å¤åˆ¶")}catch(A){r.error(((U=(o=A.response)==null?void 0:o.data)==null?void 0:U.detail)||"å¤åˆ¶å¤±è´¥")}}async function ue(y){var o,U;try{await C.deleteSkill(y.id),r.success("æŠ€èƒ½å·²åˆ é™¤")}catch(A){r.error(((U=(o=A.response)==null?void 0:o.data)==null?void 0:U.detail)||"åˆ é™¤å¤±è´¥")}}const T=pe(()=>[{label:"ğŸ­ è§’è‰²è®¾å®š (role_prompt)",content:_.role_prompt},{label:"ğŸ“ ç­–ç•¥æŒ‡å¼• (strategy_prompt)",content:_.strategy_prompt},{label:"ğŸ”§ å·¥å…·ä½¿ç”¨ç­–ç•¥ (tool_strategy_prompt)",content:_.tool_strategy_prompt},{label:"âœ… æ•²å®š / ç»ˆç¨¿æŒ‡ä»¤ (finalization_prompt)",content:_.finalization_prompt},{label:"ğŸ“„ äº§å‡ºç”Ÿæˆæ¨¡æ¿ (output_generation_prompt)",content:_.output_generation_prompt}]);return Te(()=>{C.fetchSkills()}),(y,o)=>{const U=f("n-text"),A=f("n-icon"),N=f("n-button"),Q=f("n-space"),oe=f("n-tag"),le=f("n-switch"),ne=f("n-popconfirm"),H=f("n-tooltip"),re=f("n-card"),b=f("n-gi"),D=f("n-grid"),ce=f("n-empty"),xe=f("n-spin"),G=f("n-input"),q=f("n-form-item"),de=f("n-form"),ie=f("n-tab-pane"),a=f("n-select"),l=f("n-dynamic-input"),i=f("n-divider"),x=f("n-tabs"),K=f("n-modal");return d(),F("div",null,[t(Q,{justify:"space-between",align:"center",style:{"margin-bottom":"16px"}},{default:e(()=>[t(U,{depth:"3"},{default:e(()=>[...o[19]||(o[19]=[n("ç®¡ç† AI å·¥ä½œæµæŠ€èƒ½ â€” å®šä¹‰è§’è‰²ã€å¯¹è¯ç­–ç•¥ã€é˜¶æ®µæµç¨‹å’Œäº§å‡ºæ¨¡æ¿",-1)])]),_:1}),t(N,{type:"primary",size:"small",onClick:I},{icon:e(()=>[t(A,{component:h(et)},null,8,["component"])]),default:e(()=>[o[20]||(o[20]=n(" åˆ›å»ºæ–°æŠ€èƒ½ ",-1))]),_:1})]),_:1}),t(xe,{show:h(C).loading},{default:e(()=>[h(C).skills.length?(d(),w(D,{key:0,cols:1,"y-gap":12},{default:e(()=>[(d(!0),F(ee,null,fe(h(C).skills,p=>(d(),w(b,{key:p.id},{default:e(()=>[t(re,{size:"small",style:{background:"#1a1a2e"},hoverable:""},{default:e(()=>[t(Q,{justify:"space-between",align:"center"},{default:e(()=>[t(Q,{align:"center",size:12},{default:e(()=>[k("span",It,g(p.icon),1),k("div",null,[t(Q,{align:"center",size:6},{default:e(()=>[t(U,{strong:""},{default:e(()=>[n(g(p.name),1)]),_:2},1024),p.is_builtin?(d(),w(oe,{key:0,size:"tiny",type:"info",round:""},{default:e(()=>[...o[21]||(o[21]=[n("å†…ç½®",-1)])]),_:1})):J("",!0),p.is_enabled?J("",!0):(d(),w(oe,{key:1,size:"tiny",type:"warning",round:""},{default:e(()=>[...o[22]||(o[22]=[n("å·²ç¦ç”¨",-1)])]),_:1}))]),_:2},1024),t(U,{depth:"3",style:{"font-size":"12px",display:"block","margin-top":"2px"}},{default:e(()=>[n(g(p.description),1)]),_:2},1024)])]),_:2},1024),t(Q,{size:8},{default:e(()=>[t(le,{value:p.is_enabled,size:"small","onUpdate:value":V=>te(p,V)},null,8,["value","onUpdate:value"]),t(N,{size:"tiny",quaternary:"",onClick:V=>j(p)},{icon:e(()=>[t(A,{component:h(ft)},null,8,["component"])]),_:1},8,["onClick"]),t(N,{size:"tiny",quaternary:"",onClick:V=>se(p)},{icon:e(()=>[t(A,{component:h(ot)},null,8,["component"])]),_:1},8,["onClick"]),p.is_builtin?(d(),w(H,{key:1},{trigger:e(()=>[t(N,{size:"tiny",quaternary:"",disabled:""},{icon:e(()=>[t(A,{component:h(Re)},null,8,["component"])]),_:1})]),default:e(()=>[o[23]||(o[23]=n(" å†…ç½®æŠ€èƒ½ä¸å¯åˆ é™¤ ",-1))]),_:1})):(d(),w(ne,{key:0,onPositiveClick:V=>ue(p)},{trigger:e(()=>[t(N,{size:"tiny",quaternary:"",type:"error"},{icon:e(()=>[t(A,{component:h(Re)},null,8,["component"])]),_:1})]),default:e(()=>[n(" ç¡®å®šåˆ é™¤æŠ€èƒ½ã€Œ"+g(p.name)+"ã€ï¼Ÿ ",1)]),_:2},1032,["onPositiveClick"]))]),_:2},1024)]),_:2},1024),t(Q,{size:4,style:{"margin-top":"8px"}},{default:e(()=>[(d(!0),F(ee,null,fe(p.stages,(V,$e)=>(d(),w(oe,{key:V.key,size:"tiny",bordered:!1,type:$e===0?"default":"info"},{default:e(()=>[n(g(V.label),1)]),_:2},1032,["type"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),w(ce,{key:1,description:"æš‚æ— æŠ€èƒ½é…ç½®"}))]),_:1},8,["show"]),t(K,{show:M.value,"onUpdate:show":o[18]||(o[18]=p=>M.value=p),preset:"card",title:c.value?`ç¼–è¾‘æŠ€èƒ½ â€” ${c.value.name}`:"åˆ›å»ºæ–°æŠ€èƒ½",style:{width:"800px","max-width":"95vw"},"mask-closable":!1},{footer:e(()=>[t(Q,{justify:"end"},{default:e(()=>[t(N,{onClick:o[17]||(o[17]=p=>M.value=!1)},{default:e(()=>[...o[28]||(o[28]=[n("å–æ¶ˆ",-1)])]),_:1}),t(N,{type:"primary",onClick:R,loading:L.value},{default:e(()=>[n(g(c.value?"ä¿å­˜":"åˆ›å»º"),1)]),_:1},8,["loading"])]),_:1})]),default:e(()=>[t(x,{type:"line",animated:"",value:O.value,"onUpdate:value":o[16]||(o[16]=p=>O.value=p)},{default:e(()=>[t(ie,{name:"basic",tab:"åŸºæœ¬ä¿¡æ¯"},{default:e(()=>[t(de,{model:_,"label-placement":"left","label-width":"100"},{default:e(()=>[t(q,{label:"æŠ€èƒ½åç§°"},{default:e(()=>[t(G,{value:_.name,"onUpdate:value":o[0]||(o[0]=p=>_.name=p),placeholder:"å¦‚ï¼šéœ€æ±‚åˆ†æã€Bug é—®è¯Š"},null,8,["value"])]),_:1}),t(q,{label:"å›¾æ ‡"},{default:e(()=>[t(G,{value:_.icon,"onUpdate:value":o[1]||(o[1]=p=>_.icon=p),placeholder:"Emoji å›¾æ ‡",style:{width:"80px"}},null,8,["value"])]),_:1}),t(q,{label:"æè¿°"},{default:e(()=>[t(G,{value:_.description,"onUpdate:value":o[2]||(o[2]=p=>_.description=p),placeholder:"ç®€çŸ­æè¿°æŠ€èƒ½ç”¨é€”"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),t(ie,{name:"prompts",tab:"AI å¯¹è¯é…ç½®"},{default:e(()=>[t(de,{"label-placement":"top"},{default:e(()=>[t(q,{label:"è§’è‰²å®šä¹‰ (role_prompt)"},{default:e(()=>[t(G,{value:_.role_prompt,"onUpdate:value":o[3]||(o[3]=p=>_.role_prompt=p),type:"textarea",rows:4,placeholder:"å®šä¹‰ AI çš„èº«ä»½å’Œè§’è‰²..."},null,8,["value"])]),_:1}),t(q,{label:"å¯¹è¯ç­–ç•¥ (strategy_prompt)"},{default:e(()=>[t(G,{value:_.strategy_prompt,"onUpdate:value":o[4]||(o[4]=p=>_.strategy_prompt=p),type:"textarea",rows:8,placeholder:"å®šä¹‰ AI å¦‚ä½•ä¸ç”¨æˆ·å¯¹è¯..."},null,8,["value"])]),_:1}),t(q,{label:"å·¥å…·ä½¿ç”¨ç­–ç•¥ (tool_strategy_prompt)"},{default:e(()=>[t(G,{value:_.tool_strategy_prompt,"onUpdate:value":o[5]||(o[5]=p=>_.tool_strategy_prompt=p),type:"textarea",rows:4,placeholder:"ç•™ç©ºåˆ™ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„å·¥å…·ç­–ç•¥"},null,8,["value"])]),_:1}),t(q,{label:"å®šç¨¿æç¤º (finalization_prompt)"},{default:e(()=>[t(G,{value:_.finalization_prompt,"onUpdate:value":o[6]||(o[6]=p=>_.finalization_prompt=p),type:"textarea",rows:3,placeholder:"å®šä¹‰å®šç¨¿å‰çš„æç¤º..."},null,8,["value"])]),_:1}),t(q,{label:"äº§å‡ºç‰©ç”Ÿæˆæ¨¡æ¿ (output_generation_prompt)"},{feedback:e(()=>[t(U,{depth:"3",style:{"font-size":"12px"}},{default:e(()=>[...o[24]||(o[24]=[n(" ä½¿ç”¨ ",-1),k("code",null,"{discussion_summary}",-1),n(" ä½œä¸ºè®¨è®ºå†…å®¹çš„å ä½ç¬¦ ",-1)])]),_:1})]),default:e(()=>[t(G,{value:_.output_generation_prompt,"onUpdate:value":o[7]||(o[7]=p=>_.output_generation_prompt=p),type:"textarea",rows:8,placeholder:"æ¨¡æ¿å˜é‡: {discussion_summary}"},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(ie,{name:"stages",tab:"é˜¶æ®µæµç¨‹"},{default:e(()=>[t(U,{depth:"3",style:{"margin-bottom":"12px",display:"block"}},{default:e(()=>[...o[25]||(o[25]=[n(" å®šä¹‰é¡¹ç›®ä»åˆ›å»ºåˆ°å®Œæˆçš„é˜¶æ®µæµç¨‹ã€‚key å¯¹åº”åç«¯ ProjectStatus æšä¸¾å€¼ã€‚ ",-1)])]),_:1}),t(l,{value:_.stages,"onUpdate:value":o[8]||(o[8]=p=>_.stages=p),"on-create":()=>({key:"",label:"",status:""})},{default:e(({value:p})=>[t(Q,{size:8,style:{width:"100%"}},{default:e(()=>[t(G,{value:p.key,"onUpdate:value":V=>p.key=V,placeholder:"key (å¦‚ draft)",style:{width:"140px"}},null,8,["value","onUpdate:value"]),t(G,{value:p.label,"onUpdate:value":V=>p.label=V,placeholder:"æ˜¾ç¤ºæ ‡ç­¾ (å¦‚ è‰ç¨¿)",style:{width:"140px"}},null,8,["value","onUpdate:value"]),t(a,{value:p.status,"onUpdate:value":V=>p.status=V,options:P,placeholder:"æ˜ å°„çŠ¶æ€",style:{width:"160px"}},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:1},8,["value"])]),_:1}),t(ie,{name:"labels",tab:"UI æ–‡æ¡ˆ"},{default:e(()=>[t(de,{model:_.ui_labels,"label-placement":"left","label-width":"140"},{default:e(()=>[t(q,{label:"é¡¹ç›®ç§°å‘¼"},{default:e(()=>[t(G,{value:_.ui_labels.project_noun,"onUpdate:value":o[9]||(o[9]=p=>_.ui_labels.project_noun=p),placeholder:"éœ€æ±‚ / ç¼ºé™· / å®¡æŸ¥"},null,8,["value"])]),_:1}),t(q,{label:"åˆ›å»ºå¯¹è¯æ¡†æ ‡é¢˜"},{default:e(()=>[t(G,{value:_.ui_labels.create_title,"onUpdate:value":o[10]||(o[10]=p=>_.ui_labels.create_title=p),placeholder:"ğŸ†• æ–°å»ºéœ€æ±‚"},null,8,["value"])]),_:1}),t(q,{label:"æ ‡é¢˜ placeholder"},{default:e(()=>[t(G,{value:_.ui_labels.create_placeholder,"onUpdate:value":o[11]||(o[11]=p=>_.ui_labels.create_placeholder=p),placeholder:"ç®€æ˜æè¿°éœ€æ±‚ç›®æ ‡"},null,8,["value"])]),_:1}),t(q,{label:"æè¿° placeholder"},{default:e(()=>[t(G,{value:_.ui_labels.description_placeholder,"onUpdate:value":o[12]||(o[12]=p=>_.ui_labels.description_placeholder=p),placeholder:"è¯¦ç»†æè¿°..."},null,8,["value"])]),_:1}),t(q,{label:"äº§å‡ºç‰©åç§°"},{default:e(()=>[t(G,{value:_.ui_labels.output_noun,"onUpdate:value":o[13]||(o[13]=p=>_.ui_labels.output_noun=p),placeholder:"éœ€æ±‚è§„æ ¼ä¹¦ / è¯Šæ–­ä¹¦"},null,8,["value"])]),_:1}),t(q,{label:"äº§å‡ºç‰© Tab æ ‡ç­¾"},{default:e(()=>[t(G,{value:_.ui_labels.output_tab_label,"onUpdate:value":o[14]||(o[14]=p=>_.ui_labels.output_tab_label=p),placeholder:"ğŸ“‹ è®¾è®¡ç¨¿"},null,8,["value"])]),_:1}),t(q,{label:"å®šç¨¿åŠ¨ä½œåç§°"},{default:e(()=>[t(G,{value:_.ui_labels.finalize_action,"onUpdate:value":o[15]||(o[15]=p=>_.ui_labels.finalize_action=p),placeholder:"æ•²å®šæ–¹æ¡ˆ / ç”Ÿæˆè¯Šæ–­ä¹¦"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),t(ie,{name:"preview",tab:"ğŸ” é¢„è§ˆ"},{default:e(()=>[t(U,{depth:"3",style:{display:"block","margin-bottom":"8px","font-size":"12px"}},{default:e(()=>[...o[26]||(o[26]=[n(" å®æ—¶é¢„è§ˆ AI æ”¶åˆ°çš„ system prompt ç»„è£…é¡ºåºï¼ˆä¸å«é¡¹ç›®ç»“æ„å’Œä»£ç æ‘˜è¦ç­‰åŠ¨æ€éƒ¨åˆ†ï¼‰ ",-1)])]),_:1}),k("div",Tt,[(d(!0),F(ee,null,fe(T.value,(p,V)=>(d(),F("div",{key:V,class:"preview-section"},[t(U,{depth:"3",style:{"font-size":"11px","text-transform":"uppercase","letter-spacing":"0.5px"}},{default:e(()=>[n(g(p.label),1)]),_:2},1024),p.content?(d(),w(U,{key:0,tag:"pre",style:{"font-size":"12px","white-space":"pre-wrap","word-break":"break-word",margin:"4px 0 0","line-height":"1.5",color:"#ddd"}},{default:e(()=>[n(g(p.content),1)]),_:2},1024)):(d(),w(U,{key:1,depth:"3",style:{"font-size":"12px","font-style":"italic"}},{default:e(()=>[...o[27]||(o[27]=[n("ï¼ˆç©º â€” ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ï¼‰",-1)])]),_:1}))]))),128)),t(i,{style:{margin:"8px 0"}}),t(U,{depth:"3",style:{"font-size":"11px"}},{default:e(()=>[n(" â„¹ï¸ å®é™…è¿è¡Œæ—¶è¿˜ä¼šæ’å…¥ï¼šé¡¹ç›®ç»“æ„ã€å…³é”®ç›®å½•ã€å…³é”®æ–‡ä»¶æ‘˜è¦ã€"+g(_.ui_labels.project_noun||"éœ€æ±‚")+"ä¸Šä¸‹æ–‡ ",1)]),_:1})])]),_:1})]),_:1},8,["value"])]),_:1},8,["show","title"])])}}}),jt=tt(Ot,[["__scopeId","data-v-457c8271"]]),Dt=ve({__name:"Settings",setup(Y){const r=z("ai"),C=z("providers");return(M,O)=>{const c=f("n-h3"),L=f("n-tab-pane"),P=f("n-tabs");return d(),F("div",null,[t(c,null,{default:e(()=>[...O[2]||(O[2]=[n("âš™ï¸ è®¾ç½®",-1)])]),_:1}),t(P,{type:"line",animated:"",value:r.value,"onUpdate:value":O[1]||(O[1]=B=>r.value=B)},{default:e(()=>[t(L,{name:"ai",tab:"ğŸ¤– AI é…ç½®"},{default:e(()=>[t(P,{type:"segment",animated:"",size:"small",value:C.value,"onUpdate:value":O[0]||(O[0]=B=>C.value=B),style:{"margin-bottom":"16px"}},{default:e(()=>[t(L,{name:"providers",tab:"ğŸ”Œ æœåŠ¡æä¾›å•†"},{default:e(()=>[t(kt)]),_:1}),t(L,{name:"preferences",tab:"âš™ï¸ ä½¿ç”¨åå¥½"},{default:e(()=>[t(ht)]),_:1}),t(L,{name:"models",tab:"ğŸ“Š æ¨¡å‹ç®¡ç†"},{default:e(()=>[t($t)]),_:1})]),_:1},8,["value"])]),_:1}),t(L,{name:"system",tab:"ğŸ–¥ï¸ ç³»ç»Ÿä¸æ¥å£"},{default:e(()=>[t(Lt)]),_:1}),t(L,{name:"skills",tab:"ğŸ¯ æŠ€èƒ½ç®¡ç†"},{default:e(()=>[t(jt)]),_:1})]),_:1},8,["value"])])}}});export{Dt as default};
